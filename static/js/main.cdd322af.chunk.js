(this["webpackJsonpflowchart-ui"]=this["webpackJsonpflowchart-ui"]||[]).push([[0],{172:function(e,t,n){e.exports=n(293)},177:function(e,t,n){},213:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=213},293:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(65),c=n.n(o),i=(n(177),n(178),n(28)),s=n(29),l=n(31),u=n(30),d=n(42),p=n(23),h=n(168),m=n(7),f=n.n(m),b=n(43),g=n(84),E=n(297),v=n(299),C=n(298),y=n(296),O=n(300),j=n(66),w=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.title,o=e.titleShort,c=this.props.searchbarFilter,i=this.props.homeTo;t||(t=[r.a.createElement("div",null,"No content")]),t.length||(t=[t]);var s=t.filter((function(e){return"[object Array]"!==Object.prototype.toString.call(e)}));t.filter((function(e){return"[object Array]"===Object.prototype.toString.call(e)})).forEach((function(e){s=s.concat(e)})),t=s,a.length||(a=[a]);var l=a,u=Object(g.a)(l,2),d=u[0],p=u[1],h=void 0===p?"":p;o.length||(o=[o]);var f=o,w=Object(g.a)(f,2),k=w[0],N=w[1],T=void 0===N?"":N,D=t&&t.length&&t.filter((function(e){return e.type===m.Navbar.Core})),A=Object(g.a)(D,1)[0];t.findIndex((function(e){return e.type===m.ControlSidebar}))>0&&(A=r.a.cloneElement(A,{additionalMenus:[r.a.createElement(m.Navbar.ControlSidebarEntry,{key:"control-sidebar-entry"})]}));var x=t.filter((function(e){return e!==A})),S=x.filter((function(e){return e.props&&e.props.path||"function"===typeof e.type&&e.type===E.a})).map((function(e){return e.type!==v.a||e.type!==E.a?e.type===m.AsyncContent?r.a.createElement(v.a,{modal:e.props.modal,key:e.props.path,path:e.props.path,exact:e.props.exact,component:Object(m.AsyncComponent)((function(){return n(213)(e.props.component)}))}):r.a.createElement(v.a,{modal:e.props.modal,key:e.props.path,path:e.props.path,exact:e.props.exact,render:function(t){return r.a.cloneElement(e,Object(b.a)({key:e.props.key?e.props.key:e.props.path},t))}}):e})),_=S.filter((function(e){return!e.props.modal})),B=S.filter((function(e){return e.props.modal})),R=x.find((function(e){return e.type===m.Sidebar.Core})),M=x.find((function(e){return e.type===m.Footer})),P=this.props,I=P.sidebar,F=P.footer;R&&I&&console.error("Pass sidebar either as prop or child but not both"),M&&F&&console.error("Pass footer either as prop or child but not both");var L=R||r.a.createElement(m.Sidebar.Core,{searchbarFilter:c},I),H=M||F;return r.a.createElement(C.a,null,r.a.createElement("div",{className:"wrapper"},r.a.createElement("header",{className:"main-header"},r.a.createElement(y.a,{className:"logo",to:i},r.a.createElement("span",{className:"logo-mini"},r.a.createElement("b",null,k),T),r.a.createElement("span",{className:"logo-lg"},r.a.createElement("b",null,d),h)),r.a.createElement("nav",{className:"navbar navbar-static-top"},r.a.createElement("div",{className:"sidebar-toggle","data-toggle":"push-menu",role:"button"},r.a.createElement(j.FontAwesomeIcon,{icon:["fas","bars"]}),r.a.createElement("span",{className:"sr-only"},"Toggle navigation")),r.a.createElement("div",{className:"navbar-custom-menu"},A))),L,r.a.createElement(O.a,null,B),r.a.createElement("div",{className:"content-wrapper"},r.a.createElement(O.a,null,_)),H))}}]),a}(f.a),k=n(78),N=n(81),T=n.n(N),D=T.a.namespace("charts"),A=function(e){return function(t){return t(function(e){return{type:"SELECT_CHART",id:e}}(e))}},x=function(e,t,n){return function(a){var r={id:e,title:t,code:n};return D.set(e,r),a(function(e){return{type:"CREATE_CHART",chart:e}}(r))}},S=function(e,t,n){return function(a){var r={id:e,title:t,code:n};return D.add(e,r),a(function(e){return{type:"UPDATE_CHART",chart:e}}(r))}},_=function(e){return function(t){return D.remove(e),t(function(e){return{type:"DELETE_CHART",id:e}}(e))}},B={selected:"",charts:T.a.namespace("charts").getAll()},R=function(e,t){return Object.assign({},e,{charts:Object(b.a)(Object(b.a)({},e.charts),{},Object(k.a)({},t.id,t))})},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_CHART":case"UPDATE_CHART":return R(e,t.chart);case"SELECT_CHART":return Object.assign({},e,{selected:t.id});case"DELETE_CHART":var n=Object(b.a)({},e.charts);return delete n[t.id],Object.assign({},e,{charts:n});default:return e}},P=n(20),I=n(113),F=n.n(I),L=n(169),H=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).onClickRender=function(e){var t=a.state.code;a.renderDiagram(t),a.props.updateChart(a.props.id,a.props.title,t)},a.onChangeMarkdown=function(e){a.setState({code:e.target.value})},a.onDownload=function(e,t){var n=a.canvas.current.innerHTML,r=document.createElement("canvas"),o=r.getContext("2d");L.a.fromString(o,n).start();var c=document.createElement("a");c.setAttribute("download",a.props.title+e),c.setAttribute("href",r.toDataURL(t)),c.click()},a.onDownloadSVG=function(e){var t=a.canvas.current.innerHTML,n=document.createElement("a");n.setAttribute("download",a.props.title+".svg"),n.setAttribute("href","data:image/svg+xml,"+encodeURIComponent(t)),n.click()},a.onKeyPressMarkdown=function(e){if("Enter"===e.key){var t=a.state.code;a.renderDiagram(t),a.props.updateChart(a.props.id,a.props.title,t)}},a.renderDiagram=function(e){try{if(e){document.getElementById("canvas-svg").innerHTML="";var t=F.a.parse(e);t.drawSVG("canvas-svg"),a.setState({chart:t})}}catch(n){}},a.renderMarkdownButtons=function(){return[r.a.createElement(m.Button,{key:"render",type:"danger",text:"Render",onClick:a.onClickRender,className:"margin-right"})]},a.renderVisualisationButtons=function(){return[r.a.createElement(m.Button,{key:"export",className:"export",type:"info",text:"Export"},r.a.createElement(m.Button,{type:"info",text:"SVG",onClick:a.onDownloadSVG,className:"margin-right"}),r.a.createElement(m.Button,{type:"info",text:"PNG",onClick:function(){return a.onDownload(".png","image/png")},className:"margin-right"}),r.a.createElement(m.Button,{type:"info",text:"JPG",onClick:function(){return a.onDownload(".jpeg","image/jpeg")}}))]},a.canvas=r.a.createRef(),a.onClickRender=a.onClickRender.bind(Object(P.a)(a)),a.onChangeMarkdown=a.onChangeMarkdown.bind(Object(P.a)(a)),a.onKeyPressMarkdown=a.onKeyPressMarkdown.bind(Object(P.a)(a)),a.onDownload=a.onDownload.bind(Object(P.a)(a)),a.onDownloadSVG=a.onDownloadSVG.bind(Object(P.a)(a)),a.renderDiagram=a.renderDiagram.bind(Object(P.a)(a)),a.state={code:a.props.code,chart:F.a.parse("")},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.code&&this.renderDiagram(this.props.code),this.props.id&&this.props.selectChart(this.props.id)}},{key:"componentDidUpdate",value:function(e){this.props.code!==e.code&&this.setState({code:this.props.code}),this.props.id!==e.id&&this.props.selectChart(this.props.id)}},{key:"render",value:function(){return r.a.createElement(m.Content,{title:this.props.title,browserTitle:this.props.title},r.a.createElement(m.Row,null,r.a.createElement(m.Col,{xs:6},r.a.createElement(m.Box,{title:"Markdown",type:"primary",collapsable:!0,footer:this.renderMarkdownButtons()},r.a.createElement("textarea",{className:"form-control",rows:"20",value:this.state.code,onChange:this.onChangeMarkdown,onKeyPress:this.onKeyPressMarkdown}))),r.a.createElement(m.Col,{xs:6},r.a.createElement(m.Box,{title:"Visualisation",type:"secondary",collapsable:!0,footer:this.renderVisualisationButtons()},r.a.createElement("div",{ref:this.canvas,id:"canvas-svg"})))))}}]),n}(r.a.Component);H.defaultProps={code:"",selectChart:function(){},updateChart:function(){}};var V=Object(d.b)((function(e,t){var n=t.match.params.id;return Object(b.a)({},e.charts.charts[n])}),(function(e){return Object(p.b)({selectChart:A,updateChart:S},e)}))(H),G=n(32),U=m.Inputs.Text,K=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).getChartId=function(e){return e.replace(/\s+/g,"-").toLowerCase()},a.onChange=function(e){a.setState({name:e.target.value})},a.onCreate=function(e){var t=a.state.name,n=a.getChartId(t);a.props.createChart(n,t,""),a.props.history.push("/diagram/"+n)},a.getChartId=a.getChartId.bind(Object(P.a)(a)),a.onCreate=a.onCreate.bind(Object(P.a)(a)),a.state={name:""},a}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement(m.Content,{modal:!0,title:"Add Chart",modalCloseTo:"/"},r.a.createElement(U,{label:"Name",placeholder:"Name of the Chart",onChange:this.onChange}),r.a.createElement(m.ButtonGroup,{margin:!0},r.a.createElement(m.Button,{dataTestid:"create-chart",type:"primary",text:"Create",onClick:this.onCreate,className:"margin-right"})))}}]),n}(r.a.PureComponent);K.defaultProps={history:Object(G.a)()};var X=Object(d.b)((function(e){return e}),(function(e){return Object(p.b)({createChart:x},e)}))(K),J=m.Sidebar.Item,W=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).getCharts=function(){return Object.values(a.props.charts)},a.getAddButton=function(){return r.a.createElement("span",{id:"new-chart",className:"padding-top text-center input-group-btn"},r.a.createElement(m.Button,{type:"danger",text:"+ New Chart",to:"/new-chart"}))},a.getAddButton=a.getAddButton.bind(Object(P.a)(a)),a.state={},a}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.getCharts().map((function(t){return r.a.createElement(r.a.Fragment,{key:"fragment-"+t.id},r.a.createElement(J,{key:t.id,text:t.title,to:"/diagram/"+t.id}),r.a.createElement(j.FontAwesomeIcon,{key:"trash-"+t.id,"data-testid":"trash-"+t.id,color:"white",className:"trash-icon",icon:["fas","trash"],onClick:function(n){e.props.deleteChart(t.id),n.preventDefault()}}))})),this.getAddButton())}}]),n}(r.a.Component);W.defaultProps={charts:{}};var $=Object(d.b)((function(e){return{selected:e.charts.selected,charts:e.charts.charts}}),(function(e){return Object(p.b)({deleteChart:_},e)}))(W),q=Object(p.d)(Object(p.c)({charts:M}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),Object(p.a)(h.a)),z=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement(d.a,{store:q},r.a.createElement(w,{title:["Flow","Charts"],titleShort:["Fl","Ch"],theme:"blue",sidebar:r.a.createElement($,null),footer:r.a.createElement(m.Footer,null,"PoweredBy"," ",r.a.createElement("a",{href:"http://flowchart.js.org/",target:"_blank",rel:"noopener noreferrer"},"FlowChart"))},r.a.createElement(V,{path:"/diagram/:id"}),r.a.createElement(X,{path:"/new-chart"})))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[172,1,2]]]);
//# sourceMappingURL=main.cdd322af.chunk.js.map